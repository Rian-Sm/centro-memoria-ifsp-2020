<!doctype html>
{% load static %}
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Centro de Memória" />
    <title>Centro de Memória</title>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<body>
    <div>
        <h1>{{ instituicao.nome }}</h1>
    </div>

    <form action="#contato" class="pure-form pure-form-aligned" method="post">
        {% csrf_token %}
        <fieldset>
            {% for field in form %}
            <div class="pure-control-group">
                {{ field.label_tag }}
                {{ field }}
                {% if field.errors %}
                <ul class="errorlist">
                    {% for error in field.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>
            {% endfor %}
            <div class="pure-controls">
                <button type="submit" class="pure-button pure-button-primary">Enviar Solicitação</button>
            </div>
        </fieldset>
    </form>
    <script>
        function getCidade() {
            let uf = document.getElementById('id_estado').value;
            $.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados/" + uf + "/municipios", function(data, status){
                $("#id_cidade").empty();
                $("#id_cidade").append(new Option('Selecione um Estado', ''));
                let cidades_list = []
                for (cidade of data){
                    cidades_list.push(cidade.nome)
                }
                for (cidade of cidades_list.sort(
                    function (a, b) {
                        return a.localeCompare(b);
                    }
                )){
                    $("#id_cidade").append(new Option(cidade, cidade));
                }
            });
        }
    </script>
</body>
</html>